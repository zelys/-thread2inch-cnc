;PARAMETROS
R0=2476   ;DIAMETRO DE INICIO
R1=0      ;INICIO EJE X
R2=0      ;INICIO EJE Z
R3=0.3    ;INCREMENTO EN X
R4=0.3    ;INCREMENTO EN Z
R5=300    ;LONGITUD DEL CICLO
R6=26     ;VALOR LIMITE PARADA (X-Z)
R7=50.8   ;PASO DE LA ROSCA
;-----------------------------------
;PROGRAMA
G18 G90 G71 G97 G54
T1D1
S18 M4
DIAMOF
R0=(R0/2)-R1
R8=0
R9=0
;CICLO Y CONDICIONES
WHILE (R8 < R6) AND (R9 < R6)
IF (R8+R3 > R6) OR (R9+R4 > R6)
R7=R6
R8=R6
ELSE
R8=R8+R3
R9=R9+R4
ENDIF
IF R3==0
R8=0
ENDIF
IF R4==0
R9=0
ENDIF
MSG("POSICIÓN EJE X " <<R8<<" - POSICIÓN EJE Z " <<R9<<"")
;EJECUCIÓN
G0 X=R0
G0 Z=-R2
G0 X=R0-R8 Z=-R2-R9
G33 Z=-R5 K=R7
G0 X=(R0+R1)+20
G0 Z=-R2
ENDWHILE
M30